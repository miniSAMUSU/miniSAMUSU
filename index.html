<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>miniSAMUSU</title>
  <style>
    body {
      background-image: url('https://upload.wikimedia.org/wikipedia/commons/4/4e/Hubble_ultra_deep_field.jpg');
      background-size: cover;
      font-family: sans-serif;
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    #icon {
      width: 200px;
      height: 200px;
      margin: 30px auto 10px;
      border-radius: 50%;
      background-color: #000;
      background-image: url('samus.png');
      background-size: cover;
      background-position: center;
    }
    #chat {
      background-color: rgba(255,255,255,0.9);
      color: black;
      width: 90%;
      max-width: 500px;
      margin: 0 auto;
      padding: 10px;
      border-radius: 10px;
      min-height: 200px;
      overflow-y: auto;
    }
    #button {
      width: 120px;
      height: 120px;
      margin: 20px auto;
      background-image: url('mini.png');
      background-size: cover;
      background-color: transparent;
      border: none;
      border-radius: 20px;
    }
  </style>
</head>
<body>
  <div id="icon"></div>
  <div id="chat">
    <p><strong>miniSAMUSU：</strong> 話しかけてください。</p>
  </div>
  <button id="button"></button>

  <script>
    const button = document.getElementById('button');
    const chat = document.getElementById('chat');

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    recognition.lang = 'ja-JP';
    recognition.interimResults = false;

    button.addEventListener('touchstart', () => {
      recognition.start();
    });

    button.addEventListener('touchend', () => {
      recognition.stop();
    });

    recognition.onresult = (event) => {
      const text = event.results[0][0].transcript;
      addMessage("はると", text);
      respond(text);
    };

    recognition.onerror = () => {
      addMessage("miniSAMUSU", "音声認識エラーが発生しました。");
    };

    function addMessage(sender, message) {
      const tag = document.createElement('p');
      tag.innerHTML = `<strong>[${sender}]</strong> ${message}`;
      chat.appendChild(tag);
      chat.scrollTop = chat.scrollHeight;
    }

    function respond(input) {
      let response = "よくわかりませんでした。";
      if (input.includes("天気")) {
        response = "今日の天気は晴れです！（たぶん）";
      } else if (input.includes("元気")) {
        response = "もちろん元気です！";
      }
      addMessage("miniSAMUSU", response);
    }
  </script>
</body>
</html>