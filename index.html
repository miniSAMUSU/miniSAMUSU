<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>miniSAMUSU</title>
  <style>
    body {
      background-image: url("https://upload.wikimedia.org/wikipedia/commons/3/3f/Hubble_ultra_deep_field.jpg");
      background-size: cover;
      background-position: center;
      font-family: sans-serif;
      color: white;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    .samus-icon {
      margin-top: 40px;
      width: 200px;
      height: 200px;
      border-radius: 50%;
    }

    .chat-box {
      background: white;
      color: black;
      width: 80%;
      max-width: 400px;
      margin: 20px auto;
      padding: 15px;
      border-radius: 10px;
      min-height: 120px;
      text-align: left;
      overflow-y: auto;
    }

    .chat-message {
      margin: 10px 0;
    }

    .chat-user {
      font-weight: bold;
    }

    .record-btn {
      margin: 30px auto;
      width: 120px;
      height: 120px;
      background-image: url("https://chat.openai.com/mnt/data/8A2942A8-13AC-4066-AB63-6D51BCD40AE1.png");
      background-size: cover;
      border: none;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <img src="https://chat.openai.com/mnt/data/447582EF-F247-4E69-B937-65C8F4A6472C.png" alt="miniSAMUSU" class="samus-icon" />

  <div class="chat-box" id="chat">
    <div class="chat-message"><span class="chat-user">miniSAMUSU：</span>話しかけてください。</div>
  </div>

  <button class="record-btn" id="recordBtn"></button>

  <script>
    let isRecording = false;
    const chatBox = document.getElementById("chat");

    const recordBtn = document.getElementById("recordBtn");
    recordBtn.addEventListener("touchstart", startRecording);
    recordBtn.addEventListener("mousedown", startRecording);
    recordBtn.addEventListener("touchend", stopRecording);
    recordBtn.addEventListener("mouseup", stopRecording);

    function startRecording() {
      isRecording = true;
      console.log("録音開始");
    }

    function stopRecording() {
      if (!isRecording) return;
      isRecording = false;
      const userSpeech = "今日はどんな天気？"; // ←仮のテキスト。後で音声認識で取得
      displayChat("はると", userSpeech);

      const response = generateResponse(userSpeech);
      setTimeout(() => {
        displayChat("miniSAMUSU", response);
      }, 1000);
    }

    function displayChat(user, text) {
      const div = document.createElement("div");
      div.className = "chat-message";
      div.innerHTML = `<span class="chat-user">[${user}]</span> ${text}`;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function generateResponse(input) {
      if (input.includes("天気")) {
        return "今日の天気は晴れです！（たぶん）";
      } else if (input.includes("元気")) {
        return "もちろん元気です！";
      } else {
        return "うん、聞いてるよ。";
      }
    }
  </script>
</body>
</html>